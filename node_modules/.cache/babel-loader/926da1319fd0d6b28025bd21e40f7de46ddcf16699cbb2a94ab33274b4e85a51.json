{"ast":null,"code":"import _toConsumableArray from\"/Users/webwerks/Documents/logger/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/webwerks/Documents/logger/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/* eslint-disable eqeqeq */import React from\"react\";import LoggerFilter from'./LoggerFilter';import LoggerList from'./LoggerList';import axios from'axios';import{Container}from\"react-bootstrap\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var baseURL=\"https://run.mocky.io/v3/a2fbc23e-069e-4ba5-954c-cd910986f40f\";function LoggerTable(){var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),filteredLogs=_React$useState2[0],setFilteredLogs=_React$useState2[1];var _React$useState3=React.useState(null),_React$useState4=_slicedToArray(_React$useState3,2),logs=_React$useState4[0],setLogs=_React$useState4[1];var _React$useState5=React.useState([]),_React$useState6=_slicedToArray(_React$useState5,2),actionType=_React$useState6[0],setActionType=_React$useState6[1];var _React$useState7=React.useState([]),_React$useState8=_slicedToArray(_React$useState7,2),applicationType=_React$useState8[0],setApplicationType=_React$useState8[1];// const navigate = useNavigate();\nReact.useEffect(function(){axios.get(baseURL).then(function(response){var allLogs=response.data.result.auditLog;setLogs(allLogs);setFilteredLogs(allLogs);});// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);React.useEffect(function(){if(logs!==null){var actionTypeTemp=[];var applicationTypeTemp=[];logs.forEach(function(element){actionTypeTemp=[].concat(_toConsumableArray(actionTypeTemp),[element.actionType]);applicationTypeTemp=[].concat(_toConsumableArray(applicationTypeTemp),[element.applicationType]);});actionTypeTemp=actionTypeTemp.filter(function(val,id,array){return array.indexOf(val)==id;});applicationTypeTemp=applicationTypeTemp.filter(function(val,id,array){return array.indexOf(val)==id;});setActionType(actionTypeTemp);setApplicationType(applicationTypeTemp);}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[logs]);var updateLogList=function updateLogList(filterArray,fromDate,toDate,e){e.stopPropagation();var filteredArray;console.log('abc');var isEmpty=Object.values(filterArray).every(function(x){return x===null||x===''||x==='Select';});if(isEmpty&&!(fromDate||toDate)){setFilteredLogs(logs);}else{filteredArray=logs.filter(function(el){return el.applicationId==filterArray.applicationId||el.logId==filterArray.logId||el.actionType==filterArray.actionType||el.applicationType==filterArray.applicationType;});setFilteredLogs(filteredArray);}};if(!logs)return null;return/*#__PURE__*/_jsxs(Container,{className:\"mt-3 mb-3\",children:[/*#__PURE__*/_jsx(LoggerFilter,{actionType:actionType,applicationType:applicationType,updateLogList:updateLogList}),/*#__PURE__*/_jsx(LoggerList,{logs:filteredLogs,rowsPerPage:10})]});}export default LoggerTable;","map":{"version":3,"names":["React","LoggerFilter","LoggerList","axios","Container","baseURL","LoggerTable","useState","filteredLogs","setFilteredLogs","logs","setLogs","actionType","setActionType","applicationType","setApplicationType","useEffect","get","then","response","allLogs","data","result","auditLog","actionTypeTemp","applicationTypeTemp","forEach","element","filter","val","id","array","indexOf","updateLogList","filterArray","fromDate","toDate","e","stopPropagation","filteredArray","console","log","isEmpty","Object","values","every","x","el","applicationId","logId"],"sources":["/Users/webwerks/Documents/logger/src/components/LoggerTable/index.js"],"sourcesContent":["/* eslint-disable eqeqeq */\nimport React from \"react\";\nimport LoggerFilter from './LoggerFilter';\nimport LoggerList from './LoggerList';\nimport axios from 'axios';\nimport { Container } from \"react-bootstrap\";\nconst baseURL = \"https://run.mocky.io/v3/a2fbc23e-069e-4ba5-954c-cd910986f40f\";\n\nfunction LoggerTable () {\n\tconst [filteredLogs, setFilteredLogs] = React.useState(null);\n\tconst [logs, setLogs] = React.useState(null);\n\tconst [actionType, setActionType] = React.useState([]);\n\tconst [applicationType, setApplicationType] = React.useState([]);\n\t// const navigate = useNavigate();\n\n    React.useEffect(() => {\n        axios.get(baseURL).then((response) => {\n  \t\t\tconst allLogs = response.data.result.auditLog;\n\t\t\tsetLogs(allLogs);\n\t\t\tsetFilteredLogs(allLogs);\n        });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n\tReact.useEffect(() => {\n\t\tif(logs !== null)\n\t\t{\n\t\t\tlet actionTypeTemp = [];\n\t\t\tlet applicationTypeTemp = [];\n\t\t\tlogs.forEach(element => {\n\t\t\t\tactionTypeTemp = [ ...actionTypeTemp, element.actionType];\n\t\t\t\tapplicationTypeTemp = [ ...applicationTypeTemp, element.applicationType];\n\t\t\t});\n\n\t\t\tactionTypeTemp = actionTypeTemp.filter((val,id,array) => array.indexOf(val) == id);\n\t\t\tapplicationTypeTemp = applicationTypeTemp.filter((val,id,array) => array.indexOf(val) == id);\n\t\t\tsetActionType(actionTypeTemp);\n\t\t\tsetApplicationType(applicationTypeTemp);\n\t\t}\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [logs]);\n\tconst updateLogList = (filterArray, fromDate, toDate, e) =>  {\n\t\te.stopPropagation();\n\t\tlet filteredArray;\n\t\tconsole.log('abc');\n\t\tconst isEmpty = Object.values(filterArray).every(x => x === null || x === '' || x === 'Select');\n\t\tif(isEmpty && !(fromDate || toDate)) {\n\t\t\tsetFilteredLogs(logs);\n\t\t} else {\n\n\t\t\tfilteredArray = logs.filter((el) => {\t\n\t\t\t\treturn el.applicationId == filterArray.applicationId ||\n\t\t\t\t\tel.logId == filterArray.logId ||\n\t\t\t\t\tel.actionType == filterArray.actionType ||\n\t\t\t\t\tel.applicationType == filterArray.applicationType;\n\t\t\t}\n\t\t\t);\n\t\t\tsetFilteredLogs(filteredArray);\n\t\t}\n\t}\n\n    if (!logs) return null;\n\treturn <Container className=\"mt-3 mb-3\">\n\t\t<LoggerFilter actionType={actionType} applicationType={applicationType} updateLogList={updateLogList} />\n\t\t<LoggerList logs={filteredLogs} rowsPerPage={10} />\n\t</Container>\n}\nexport default LoggerTable;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}